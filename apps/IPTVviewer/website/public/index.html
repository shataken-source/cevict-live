<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Switchback TV</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <!-- HLS.js bundled locally ‚Äî no CDN dependency -->
  <script src="/hls.min.js"></script>
  <style>
    :root {
      --bg: #0a0a0f;
      --panel: #13131a;
      --panel2: #1a1a24;
      --border: rgba(255, 255, 255, 0.08);
      --text: #fff;
      --muted: #8b8b9e;
      --primary: #e50000;
      --primary2: #ff3a3a;
      --accent: #00c2ff;
      --green: #00e676;
      --yellow: #ffc107;
      --purple: #7c4dff;
      --radius: 12px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    #app {
      display: flex;
      height: 100vh;
    }

    #sidebar {
      width: 220px;
      flex-shrink: 0;
      background: var(--panel);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transition: width 0.25s;
    }

    #sidebar.collapsed {
      width: 64px;
    }

    .sb-logo {
      padding: 18px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid var(--border);
    }

    .sb-logo-icon {
      width: 32px;
      height: 32px;
      background: var(--primary);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }

    .sb-logo-text {
      font-size: 15px;
      font-weight: 800;
      white-space: nowrap;
      background: linear-gradient(90deg, #ff3a3a, #ff8c00);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .sb-nav {
      flex: 1;
      padding: 10px 8px;
      overflow-y: auto;
    }

    .sb-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 9px 10px;
      border-radius: 10px;
      cursor: pointer;
      margin-bottom: 2px;
      color: var(--muted);
      font-size: 13px;
      font-weight: 500;
      white-space: nowrap;
      transition: background 0.15s, color 0.15s;
    }

    .sb-item:hover {
      background: rgba(255, 255, 255, 0.06);
      color: #fff;
    }

    .sb-item.active {
      background: rgba(229, 0, 0, 0.15);
      color: var(--primary2);
    }

    .sb-item .icon {
      font-size: 17px;
      flex-shrink: 0;
      width: 24px;
      text-align: center;
    }

    #sidebar.collapsed .label,
    .sb-section {
      font-size: 10px;
      font-weight: 700;
      color: #444;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 6px 12px 3px;
      white-space: nowrap;
    }

    #sidebar.collapsed .label {
      display: none;
    }

    #sidebar.collapsed .sb-section {
      display: none;
    }

    #sidebar.collapsed .sb-logo-text {
      display: none;
    }

    .sb-footer {
      padding: 10px 8px;
      border-top: 1px solid var(--border);
    }

    .sb-toggle {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 9px 10px;
      border-radius: 10px;
      cursor: pointer;
      color: var(--muted);
      font-size: 12px;
    }

    .sb-toggle:hover {
      color: #fff;
    }

    #main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    #topbar {
      height: 54px;
      flex-shrink: 0;
      background: var(--panel);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      padding: 0 18px;
      gap: 14px;
    }

    #topbar-title {
      font-size: 15px;
      font-weight: 700;
      flex: 1;
    }

    .tb-search {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 6px 12px;
      flex: 1;
      max-width: 300px;
    }

    .tb-search input {
      background: none;
      border: none;
      outline: none;
      color: #fff;
      font-size: 13px;
      width: 100%;
    }

    .tb-search input::placeholder {
      color: var(--muted);
    }

    .tb-actions {
      display: flex;
      gap: 8px;
    }

    .tb-btn {
      padding: 5px 13px;
      border-radius: 8px;
      border: none;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
    }

    .btn-red {
      background: var(--primary);
      color: #fff;
    }

    .btn-red:hover {
      background: var(--primary2);
    }

    .btn-ghost {
      background: var(--panel2);
      color: var(--muted);
      border: 1px solid var(--border);
    }

    .btn-ghost:hover {
      color: #fff;
    }

    #content {
      flex: 1;
      overflow-y: auto;
    }

    #content::-webkit-scrollbar {
      width: 4px;
    }

    #content::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 2px;
    }

    .screen {
      display: none;
      padding: 22px;
    }

    .screen.active {
      display: block;
    }

    .screen.full-h {
      padding: 0;
    }

    .page-title {
      font-size: 21px;
      font-weight: 800;
      margin-bottom: 3px;
    }

    .page-sub {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 10px;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin: 18px 0 8px;
    }

    .pill-row {
      display: flex;
      gap: 7px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .pill {
      padding: 5px 13px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.15s;
    }

    .pill-active {
      background: var(--primary);
      color: #fff;
    }

    .pill-inactive {
      background: var(--panel2);
      color: var(--muted);
      border: 1px solid var(--border);
    }

    .pill-inactive:hover {
      color: #fff;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      padding: 2px 7px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 700;
    }

    .badge-live {
      background: rgba(229, 0, 0, 0.2);
      color: #ff5555;
      border: 1px solid rgba(229, 0, 0, 0.3);
    }

    .badge-hd {
      background: rgba(0, 194, 255, 0.15);
      color: var(--accent);
      border: 1px solid rgba(0, 194, 255, 0.2);
    }

    .badge-green {
      background: rgba(0, 230, 118, 0.15);
      color: var(--green);
      border: 1px solid rgba(0, 230, 118, 0.2);
    }

    .badge-yellow {
      background: rgba(255, 193, 7, 0.15);
      color: var(--yellow);
    }

    .badge-purple {
      background: rgba(124, 77, 255, 0.15);
      color: var(--purple);
    }

    .ch-row {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 11px 13px;
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 7px;
      cursor: pointer;
      transition: background 0.15s;
    }

    .ch-row:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .ch-icon {
      width: 38px;
      height: 38px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
      font-weight: 700;
      font-size: 13px;
    }

    .ch-info {
      flex: 1;
      min-width: 0;
    }

    .ch-name {
      font-size: 13px;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .ch-sub {
      font-size: 11px;
      color: var(--muted);
      margin-top: 1px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .ch-meta {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-shrink: 0;
    }

    .inp {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px 12px;
      color: #fff;
      font-size: 13px;
      font-family: inherit;
      outline: none;
      width: 100%;
      transition: border-color 0.15s;
    }

    .inp:focus {
      border-color: var(--primary);
    }

    .inp::placeholder {
      color: var(--muted);
    }

    .btn {
      padding: 8px 16px;
      border-radius: 8px;
      border: none;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
    }

    .btn-accent {
      background: var(--accent);
      color: #000;
    }

    .btn-green-s {
      background: var(--green);
      color: #000;
    }

    .btn-full {
      width: 100%;
      text-align: center;
    }

    .btn-sm {
      padding: 4px 11px;
      font-size: 11px;
    }

    .card {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
    }

    .row-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 9px 0;
      border-bottom: 1px solid var(--border);
    }

    .row-item:last-child {
      border-bottom: none;
    }

    .toggle-sw {
      width: 42px;
      height: 23px;
      background: #333;
      border-radius: 12px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
      flex-shrink: 0;
    }

    .toggle-sw.on {
      background: var(--green);
    }

    .toggle-sw::after {
      content: '';
      width: 17px;
      height: 17px;
      background: #fff;
      border-radius: 9px;
      position: absolute;
      top: 3px;
      left: 3px;
      transition: transform 0.2s;
    }

    .toggle-sw.on::after {
      transform: translateX(19px);
    }

    .progress-bar {
      background: #333;
      border-radius: 4px;
      height: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 4px;
      background: linear-gradient(90deg, var(--primary), #ff8c00);
    }

    .stat-box {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
      text-align: center;
    }

    .stat-val {
      font-size: 26px;
      font-weight: 800;
    }

    .stat-label {
      font-size: 11px;
      color: var(--muted);
      margin-top: 3px;
    }

    .settings-group {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 3px 13px;
      margin-bottom: 14px;
    }

    .media-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 14px;
    }

    .media-card {
      cursor: pointer;
    }

    .media-poster {
      width: 100%;
      aspect-ratio: 2/3;
      border-radius: 10px;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 44px;
      transition: transform 0.2s;
      margin-bottom: 7px;
      overflow: hidden;
      position: relative;
    }

    .media-poster:hover {
      transform: scale(1.04);
    }

    .media-poster img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      inset: 0;
    }

    .media-title {
      font-size: 12px;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .media-meta {
      font-size: 10px;
      color: var(--muted);
      margin-top: 1px;
    }

    .quality-opt {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 11px 13px;
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 7px;
      cursor: pointer;
    }

    .quality-opt.sel {
      border-color: var(--primary);
      background: rgba(229, 0, 0, 0.07);
    }

    .device-card {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 13px 15px;
      margin-bottom: 9px;
    }

    .rec-card {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 13px;
      margin-bottom: 9px;
    }

    .hist-item {
      display: flex;
      align-items: center;
      gap: 11px;
      padding: 9px 13px;
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 7px;
    }

    .date-pill {
      padding: 7px 14px;
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      background: var(--panel2);
      border: 1px solid var(--border);
      min-width: 56px;
    }

    .date-pill.active {
      background: var(--primary);
      border-color: var(--primary);
    }

    .date-pill-day {
      font-size: 10px;
      font-weight: 700;
      color: var(--muted);
    }

    .date-pill.active .date-pill-day {
      color: rgba(255, 255, 255, 0.75);
    }

    .date-pill-num {
      font-size: 15px;
      font-weight: 800;
      margin-top: 1px;
    }

    .epg-wrap {
      overflow: auto;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      max-height: calc(100vh - 200px);
    }

    .epg-hdr {
      display: flex;
      position: sticky;
      top: 0;
      background: var(--panel);
      z-index: 5;
      border-bottom: 1px solid var(--border);
    }

    .epg-ch-hdr {
      width: 110px;
      flex-shrink: 0;
      padding: 7px 9px;
      font-size: 10px;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
      border-right: 1px solid var(--border);
      position: sticky;
      left: 0;
      background: var(--panel);
      z-index: 6;
    }

    .epg-slot {
      min-width: 190px;
      padding: 7px 11px;
      font-size: 11px;
      color: var(--muted);
      border-right: 1px solid var(--border);
      font-weight: 600;
    }

    .epg-row {
      display: flex;
      border-bottom: 1px solid var(--border);
    }

    .epg-ch-cell {
      width: 110px;
      flex-shrink: 0;
      background: var(--panel2);
      position: sticky;
      left: 0;
      z-index: 4;
      padding: 7px 9px;
      display: flex;
      align-items: center;
      gap: 7px;
      border-right: 1px solid var(--border);
    }

    .epg-ch-nm {
      font-size: 11px;
      font-weight: 700;
    }

    .epg-progs {
      display: flex;
      flex: 1;
    }

    .epg-prog {
      border-right: 1px solid var(--border);
      padding: 7px 10px;
      cursor: pointer;
      transition: background 0.15s;
      min-width: 190px;
    }

    .epg-prog:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .epg-prog.live {
      background: rgba(229, 0, 0, 0.1);
      border-left: 2px solid var(--primary);
    }

    .epg-prog-title {
      font-size: 12px;
      font-weight: 600;
    }

    .epg-prog-time {
      font-size: 10px;
      color: var(--muted);
      margin-top: 1px;
    }

    .price-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 18px;
      max-width: 860px;
    }

    .price-card {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 24px;
    }

    .price-card.featured {
      border: 2px solid var(--primary);
      background: rgba(229, 0, 0, 0.05);
    }

    .price-amount {
      font-size: 38px;
      font-weight: 900;
      margin: 14px 0 3px;
    }

    .price-feature {
      font-size: 12px;
      color: #ccc;
      padding: 4px 0;
      border-bottom: 1px solid var(--border);
      display: flex;
      gap: 7px;
    }

    .price-feature:last-child {
      border-bottom: none;
    }

    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px;
      color: var(--muted);
      font-size: 14px;
      gap: 10px;
    }

    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid #333;
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg)
      }
    }

    .tile {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: 14px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      padding: 20px;
      transition: all 0.2s;
    }

    .tile:hover {
      background: rgba(255, 255, 255, 0.05);
      transform: scale(1.02);
    }

    .sidebar-tile {
      background: rgba(100, 100, 130, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      gap: 7px;
      transition: all 0.2s;
    }

    .sidebar-tile:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    * {
      scrollbar-width: thin;
      scrollbar-color: #333 transparent;
    }

    .fav-star {
      cursor: pointer;
      font-size: 17px;
      color: var(--muted);
      transition: color 0.15s;
    }

    .fav-star.on {
      color: var(--yellow);
    }

    .error-box {
      background: rgba(229, 0, 0, 0.08);
      border: 1px solid rgba(229, 0, 0, 0.2);
      border-radius: var(--radius);
      padding: 14px;
      color: #ff8888;
      font-size: 13px;
      margin-bottom: 14px;
    }
  </style>
</head>

<body>
  <div id="app">
    <nav id="sidebar">
      <div class="sb-logo">
        <div class="sb-logo-icon">üì∫</div>
        <span class="sb-logo-text">Switchback TV</span>
      </div>
      <div class="sb-nav">
        <div class="sb-section">Menu</div>
        <div class="sb-item active" data-screen="tvhome"><span class="icon">üè†</span><span class="label">Home</span>
        </div>
        <div class="sb-item" data-screen="channels"><span class="icon">üì°</span><span class="label">Live TV</span></div>
        <div class="sb-item" data-screen="movies"><span class="icon">üé¨</span><span class="label">Movies</span></div>
        <div class="sb-item" data-screen="series"><span class="icon">üé≠</span><span class="label">Series</span></div>
        <div class="sb-section">Library</div>
        <div class="sb-item" data-screen="favorites"><span class="icon">‚≠ê</span><span class="label">Favorites</span>
        </div>
        <div class="sb-item" data-screen="history"><span class="icon">üïê</span><span class="label">History</span></div>
        <div class="sb-item" data-screen="recordings"><span class="icon">‚è∫</span><span class="label">Recordings</span>
        </div>
        <div class="sb-item" data-screen="catchup"><span class="icon">‚è™</span><span class="label">Catch-Up</span></div>
        <div class="sb-section">Discover</div>
        <div class="sb-item" data-screen="epg"><span class="icon">üìã</span><span class="label">TV Guide</span></div>
        <div class="sb-item" data-screen="search"><span class="icon">üîç</span><span class="label">Search</span></div>
        <div class="sb-section">Account</div>
        <div class="sb-item" data-screen="devices"><span class="icon">üì±</span><span class="label">Devices</span></div>
        <div class="sb-item" data-screen="quality"><span class="icon">üì∂</span><span class="label">Quality</span></div>
        <div class="sb-item" data-screen="pricing"><span class="icon">üíé</span><span class="label">Plans</span></div>
        <div class="sb-item" data-screen="settings"><span class="icon">‚öôÔ∏è</span><span class="label">Settings</span>
        </div>
      </div>
      <div class="sb-footer">
        <div class="sb-toggle" id="sb-toggle-btn">
          <span class="icon">‚óÄ</span><span class="label" style="font-size:12px">Collapse</span>
        </div>
      </div>
    </nav>
    <div id="main">
      <div id="topbar">
        <span id="topbar-title">Home</span>
        <div class="tb-search">
          <span style="color:var(--muted);font-size:13px">üîç</span>
          <input id="global-search" type="text" placeholder="Search channels, movies, shows..." />
        </div>
        <div class="tb-actions">
          <button class="tb-btn btn-ghost" data-screen="settings">‚öôÔ∏è</button>
          <button class="tb-btn btn-red" data-screen="pricing">Upgrade</button>
        </div>
      </div>
      <div id="content">

        <!-- TV HOME -->
        <div class="screen active" id="screen-tvhome" style="padding:20px;height:calc(100vh - 54px);">
          <div id="tvhome-content" style="height:100%;display:flex;flex-direction:column;"></div>
        </div>

        <!-- LIVE TV / CHANNELS -->
        <div class="screen" id="screen-channels">
          <div class="page-title">üì° Live TV</div>
          <div class="page-sub" id="channels-sub">Loading channels...</div>
          <div class="pill-row" id="cat-pills">
            <button class="pill pill-active" data-cat-id="">All</button>
          </div>
          <input class="inp" id="ch-search" placeholder="üîç Search channels..." style="margin-bottom:14px" />
          <div id="channel-list">
            <div class="loading">
              <div class="spinner"></div> Loading channels from blogyfy.xyz...
            </div>
          </div>
        </div>

        <!-- MOVIES -->
        <div class="screen" id="screen-movies">
          <div class="page-title">üé¨ Movies</div>
          <div class="page-sub" id="movies-sub">Loading VOD library...</div>
          <div class="pill-row" id="movies-cat-pills">
            <button class="pill pill-active" data-vod-cat="">All</button>
          </div>
          <input class="inp" id="movies-search" placeholder="üîç Search movies..." style="margin-bottom:16px" />
          <div id="movies-grid" class="media-grid">
            <div class="loading">
              <div class="spinner"></div> Loading movies...
            </div>
          </div>
        </div>

        <!-- SERIES -->
        <div class="screen" id="screen-series">
          <div class="page-title">üé≠ Series</div>
          <div class="page-sub" id="series-sub">Loading series library...</div>
          <div class="pill-row" id="series-cat-pills">
            <button class="pill pill-active" data-series-cat="">All</button>
          </div>
          <input class="inp" id="series-search" placeholder="üîç Search series..." style="margin-bottom:16px" />
          <div id="series-grid" class="media-grid">
            <div class="loading">
              <div class="spinner"></div> Loading series...
            </div>
          </div>
        </div>

        <!-- FAVORITES -->
        <div class="screen" id="screen-favorites">
          <div class="page-title">‚≠ê Favorites</div>
          <div class="page-sub">Your saved channels</div>
          <div id="favorites-list">
            <div style="color:var(--muted);font-size:13px;padding:20px 0">No favorites yet ‚Äî star channels to add them
              here.</div>
          </div>
        </div>

        <!-- HISTORY -->
        <div class="screen" id="screen-history">
          <div class="page-title">üïê Watch History</div>
          <div class="page-sub">Recently watched channels</div>
          <div style="display:flex;justify-content:flex-end;margin-bottom:14px">
            <button class="btn btn-ghost btn-sm" id="clear-history-btn" style="color:var(--primary)">üóë Clear
              All</button>
          </div>
          <div id="history-list">
            <div style="color:var(--muted);font-size:13px;padding:20px 0">No history yet ‚Äî start watching to see it
              here.</div>
          </div>
        </div>

        <!-- RECORDINGS -->
        <div class="screen" id="screen-recordings">
          <div class="page-title">‚è∫ DVR Recordings</div>
          <div class="page-sub">Cloud DVR ¬∑ Record and manage your shows</div>
          <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:11px;margin-bottom:20px">
            <div class="stat-box">
              <div class="stat-val" style="color:var(--primary)" id="rec-count">0</div>
              <div class="stat-label">Recordings</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" style="color:var(--green)">0</div>
              <div class="stat-label">Recording Now</div>
            </div>
            <div class="stat-box">
              <div class="stat-val">0 GB</div>
              <div class="stat-label">Used</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" style="color:var(--muted)">50 GB</div>
              <div class="stat-label">Total</div>
            </div>
          </div>
          <div id="recordings-list">
            <div style="color:var(--muted);font-size:13px;padding:20px 0">No recordings yet. Schedule a recording while
              watching Live TV.</div>
          </div>
          <div class="section-title" style="margin-top:16px">Schedule New Recording</div>
          <div class="card" style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap">
            <div style="flex:2;min-width:140px"><label
                style="font-size:11px;color:var(--muted);display:block;margin-bottom:3px">Channel</label><input
                class="inp" id="rec-channel" placeholder="e.g. ESPN" /></div>
            <div style="flex:2;min-width:140px"><label
                style="font-size:11px;color:var(--muted);display:block;margin-bottom:3px">Program</label><input
                class="inp" id="rec-program" placeholder="e.g. SportsCenter" /></div>
            <div style="flex:1;min-width:110px"><label
                style="font-size:11px;color:var(--muted);display:block;margin-bottom:3px">Date</label><input class="inp"
                type="date" id="rec-date" /></div>
            <div style="flex:1;min-width:90px"><label
                style="font-size:11px;color:var(--muted);display:block;margin-bottom:3px">Time</label><input class="inp"
                type="time" id="rec-time" /></div>
            <button class="btn btn-red btn-sm" id="add-rec-btn">+ Schedule</button>
          </div>
        </div>

        <!-- CATCH-UP -->
        <div class="screen" id="screen-catchup">
          <div class="page-title">‚è™ Catch-Up TV</div>
          <div class="page-sub">Watch missed programs ‚Äî click a channel then select a program</div>
          <div style="display:flex;gap:9px;margin-bottom:18px;overflow-x:auto;padding-bottom:4px" id="catchup-dates">
          </div>
          <div style="display:flex;gap:14px;flex-wrap:wrap">
            <div style="flex:1;min-width:200px">
              <div class="section-title">Channels</div>
              <div id="catchup-channels">
                <div class="loading">
                  <div class="spinner"></div>
                </div>
              </div>
            </div>
            <div style="flex:2;min-width:260px">
              <div class="section-title" id="catchup-epg-title">Select a channel to view programs</div>
              <div id="catchup-epg"></div>
            </div>
          </div>
        </div>

        <!-- EPG -->
        <div class="screen" id="screen-epg">
          <div class="page-title">üìã TV Guide</div>
          <div class="page-sub">Live program schedule ¬∑ Click any show to watch</div>
          <div style="display:flex;align-items:center;gap:9px;margin-bottom:14px">
            <button class="btn btn-ghost btn-sm" id="epg-prev">‚óÄ Earlier</button>
            <button class="btn btn-red btn-sm" id="epg-now">‚óè Now</button>
            <button class="btn btn-ghost btn-sm" id="epg-next">Later ‚ñ∂</button>
            <div style="flex:1"></div>
            <span style="font-size:12px;color:var(--muted)" id="epg-time-display"></span>
          </div>
          <div class="epg-wrap" id="epg-wrap">
            <div class="loading">
              <div class="spinner"></div> Loading EPG data...
            </div>
          </div>
        </div>

        <!-- SEARCH -->
        <div class="screen" id="screen-search">
          <div class="page-title">üîç Search</div>
          <div class="page-sub">Find channels, movies, and shows</div>
          <input class="inp" id="search-input" placeholder="Search channels, movies, shows..."
            style="font-size:14px;padding:11px 15px;margin-bottom:14px" />
          <div class="pill-row">
            <button class="pill pill-active" data-stype="all">All</button>
            <button class="pill pill-inactive" data-stype="channels">üì° Channels</button>
            <button class="pill pill-inactive" data-stype="movies">üé¨ Movies</button>
            <button class="pill pill-inactive" data-stype="series">üé≠ Series</button>
          </div>
          <div id="search-results">
            <div class="section-title">Trending</div>
            <div id="trending-channels"></div>
          </div>
        </div>

        <!-- DEVICES -->
        <div class="screen" id="screen-devices">
          <div class="page-title">üì± Devices</div>
          <div class="page-sub">Connected sessions and account info</div>
          <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:11px;margin-bottom:20px" id="devices-stats">
            <div class="stat-box">
              <div class="stat-val" id="dev-active">‚Äî</div>
              <div class="stat-label">Active Streams</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" id="dev-max">‚Äî</div>
              <div class="stat-label">Max Allowed</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" id="dev-status" style="font-size:14px">‚Äî</div>
              <div class="stat-label">Account Status</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" id="dev-expires" style="font-size:13px">‚Äî</div>
              <div class="stat-label">Expires</div>
            </div>
          </div>
          <div id="devices-info"></div>
        </div>

        <!-- QUALITY -->
        <div class="screen" id="screen-quality">
          <div class="page-title">üì∂ Stream Quality</div>
          <div class="page-sub">Video quality and buffer settings</div>
          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:11px;margin-bottom:22px;max-width:500px">
            <div class="stat-box">
              <div class="stat-val" style="color:var(--green)" id="q-bitrate">‚Äî</div>
              <div class="stat-label">Mbps</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" style="color:var(--accent)" id="q-ping">‚Äî</div>
              <div class="stat-label">Ping</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" style="color:var(--green)" id="q-buf">Good</div>
              <div class="stat-label">Buffer</div>
            </div>
          </div>
          <div style="max-width:660px">
            <div class="section-title">Quality Selection</div>
            <div class="quality-opt sel" data-q="auto">
              <div>
                <div style="font-size:13px;font-weight:700">Auto (Recommended)</div>
                <div style="font-size:11px;color:var(--muted);margin-top:1px">Adapts to your connection</div>
              </div><span class="badge badge-green">‚úì Selected</span>
            </div>
            <div class="quality-opt" data-q="4k">
              <div>
                <div style="font-size:13px;font-weight:700">4K UHD</div>
                <div style="font-size:11px;color:var(--muted);margin-top:1px">~25 Mbps required</div>
              </div><span class="badge badge-purple">Elite</span>
            </div>
            <div class="quality-opt" data-q="1080p">
              <div>
                <div style="font-size:13px;font-weight:700">1080p Full HD</div>
                <div style="font-size:11px;color:var(--muted);margin-top:1px">~8 Mbps required</div>
              </div><span class="badge badge-hd">Pro+</span>
            </div>
            <div class="quality-opt" data-q="720p">
              <div>
                <div style="font-size:13px;font-weight:700">720p HD</div>
                <div style="font-size:11px;color:var(--muted);margin-top:1px">~4 Mbps required</div>
              </div><span class="badge badge-green">Available</span>
            </div>
            <div class="quality-opt" data-q="480p">
              <div>
                <div style="font-size:13px;font-weight:700">480p SD</div>
                <div style="font-size:11px;color:var(--muted);margin-top:1px">~1.5 Mbps required</div>
              </div><span class="badge badge-green">Available</span>
            </div>
            <div class="section-title">Buffer &amp; Performance</div>
            <div class="card">
              <div class="row-item"><span style="font-size:13px">Buffer Size</span><select class="inp"
                  id="q-buffer-select" tabindex="0" style="width:auto;padding:3px 8px">
                  <option>Small (3s)</option>
                  <option selected>Medium (5s)</option>
                  <option>Large (10s)</option>
                </select></div>
              <div class="row-item"><span style="font-size:13px">Hardware Decode</span>
                <div class="toggle-sw on" tabindex="0" onclick="this.classList.toggle('on')"></div>
              </div>
              <div class="row-item"><span style="font-size:13px">Low Latency Mode</span>
                <div class="toggle-sw" tabindex="0" onclick="this.classList.toggle('on')"></div>
              </div>
              <div class="row-item"><span style="font-size:13px">Reconnect on Drop</span>
                <div class="toggle-sw on" tabindex="0" onclick="this.classList.toggle('on')"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- PRICING -->
        <div class="screen" id="screen-pricing">
          <div class="page-title">üíé Plans &amp; Pricing</div>
          <div class="page-sub">One-time payment ¬∑ No subscriptions ¬∑ Lifetime access</div>
          <div class="price-grid">
            <div class="price-card">
              <div
                style="font-size:12px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px">
                Basic</div>
              <div style="font-size:20px;font-weight:800">Starter</div>
              <div class="price-amount">$0</div>
              <div style="font-size:12px;color:var(--muted);margin-bottom:18px">Free forever</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>1 stream ¬∑ Unlimited channels</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>M3U / Xtream Codes support</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>10 favorites ¬∑ Watch history</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Basic EPG (7 days)</div>
              <div class="price-feature"><span style="color:#555">‚úó</span>DVR / Recordings</div>
              <div class="price-feature"><span style="color:#555">‚úó</span>Ad Detection ¬∑ Catch-Up</div>
              <button class="btn btn-ghost btn-full" style="margin-top:18px">Current Plan</button>
            </div>
            <div class="price-card featured">
              <div
                style="display:inline-block;background:var(--primary);color:#fff;font-size:10px;font-weight:700;padding:2px 9px;border-radius:20px;margin-bottom:8px">
                ‚òÖ Most Popular</div>
              <div
                style="font-size:12px;font-weight:700;color:var(--primary2);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px">
                Advanced</div>
              <div style="font-size:20px;font-weight:800">Pro</div>
              <div class="price-amount" style="color:var(--primary2)">$9</div>
              <div style="font-size:12px;color:var(--muted);margin-bottom:18px">One-time payment</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>3 streams ¬∑ Unlimited favorites</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Full EPG (14 days) ¬∑ HD quality</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Ad Detection &amp; Block</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>DVR 50 GB cloud storage</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Catch-Up TV (7 days)</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Chromecast support</div>
              <button class="btn btn-red btn-full" style="margin-top:18px"
                onclick="alert('Stripe checkout coming soon!\n$9 one-time ‚Äî Advanced Tier')">Upgrade to Pro ‚Üí</button>
            </div>
            <div class="price-card" style="border-color:rgba(0,194,255,0.3);background:rgba(0,194,255,0.03)">
              <div
                style="font-size:12px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px">
                Experimental</div>
              <div style="font-size:20px;font-weight:800">Elite</div>
              <div class="price-amount" style="color:var(--accent)">$19</div>
              <div style="font-size:12px;color:var(--muted);margin-bottom:18px">One-time payment</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>5 streams ¬∑ 4K UHD quality</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>DVR 250 GB ¬∑ Catch-Up 30 days</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>AI Smart Recommendations</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Voice Control ¬∑ PiP</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Multi-View (4 channels)</div>
              <div class="price-feature"><span style="color:var(--green)">‚úì</span>Priority support</div>
              <button class="btn btn-accent btn-full" style="margin-top:18px"
                onclick="alert('Stripe checkout coming soon!\n$19 one-time ‚Äî Elite Tier')">Go Elite ‚Üí</button>
            </div>
          </div>
          <div
            style="margin-top:24px;padding:14px;background:var(--panel2);border:1px solid var(--border);border-radius:var(--radius);max-width:860px">
            <div style="font-size:13px;font-weight:700;margin-bottom:7px">üì¶ Download the Android TV App</div>
            <div style="display:flex;gap:11px;align-items:center">
              <a href="http://192.168.8.152:9000/switchback-v2.apk" class="btn btn-ghost btn-sm">‚¨á Download APK</a>
              <span style="font-size:12px;color:var(--muted)">Version 1.0.0 ¬∑ Android 5.1+ ¬∑ Feb 2026</span>
            </div>
          </div>
        </div>

        <!-- SETTINGS -->
        <div class="screen" id="screen-settings">
          <div class="page-title">‚öôÔ∏è Settings</div>
          <div class="page-sub">Provider credentials, playback, and app preferences</div>
          <div id="settings-status"></div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:22px;max-width:860px">
            <div>
              <div class="section-title">Quick Setup</div>
              <div class="settings-group" style="padding:13px" id="import-config-group">
                <div
                  style="font-size:10px;color:var(--muted);margin-bottom:9px;text-transform:uppercase;letter-spacing:1px">
                  Import Provider Config</div>
                <textarea class="inp" id="cfg-import-input" rows="3" inputmode="none"
                  style="margin-bottom:8px;font-size:12px;resize:vertical"
                  placeholder="Paste anything: Xtream URL (http://server/username/password), M3U URL, or JSON {server,username,password,epg}"></textarea>
                <button class="btn btn-red btn-sm btn-full" id="cfg-import-btn" tabindex="0">‚ö° Import &amp;
                  Apply</button>
                <div id="cfg-import-result" style="margin-top:8px;font-size:12px"></div>
              </div>
              <div class="section-title">IPTV Provider</div>
              <div class="settings-group" style="padding:13px">
                <div
                  style="font-size:10px;color:var(--muted);margin-bottom:9px;text-transform:uppercase;letter-spacing:1px">
                  Server Credentials</div>
                <input class="inp" id="cfg-server" inputmode="none" style="margin-bottom:7px"
                  placeholder="Server URL e.g. http://blogyfy.xyz" />
                <input class="inp" id="cfg-user" inputmode="none" style="margin-bottom:7px" placeholder="Username" />
                <input class="inp" type="password" id="cfg-pass" inputmode="none" style="margin-bottom:10px"
                  placeholder="Password" />
                <div style="display:flex;gap:8px">
                  <button class="btn btn-red btn-sm" id="save-creds-btn" style="flex:1">üíæ Save &amp; Test</button>
                  <button class="btn btn-ghost btn-sm" id="reset-creds-btn">‚Ü∫ Reset</button>
                </div>
                <div id="creds-test-result" style="margin-top:9px;font-size:12px"></div>
              </div>
              <div class="section-title">Account Info</div>
              <div class="settings-group" id="acct-info">
                <div class="row-item"><span style="font-size:13px">Status</span><span id="acct-status"
                    style="font-size:12px;color:var(--muted)">‚Äî</span></div>
                <div class="row-item"><span style="font-size:13px">Channels</span><span id="acct-channels"
                    style="font-size:12px;color:var(--muted)">‚Äî</span></div>
                <div class="row-item"><span style="font-size:13px">Expires</span><span id="acct-expires"
                    style="font-size:12px;color:var(--muted)">‚Äî</span></div>
                <div class="row-item"><span style="font-size:13px">Max Connections</span><span id="acct-max-conn"
                    style="font-size:12px;color:var(--muted)">‚Äî</span></div>
              </div>
              <div class="section-title">EPG / Guide</div>
              <div class="settings-group" style="padding:13px">
                <input class="inp" id="cfg-epg" inputmode="none" style="margin-bottom:8px"
                  placeholder="XMLTV EPG URL (optional)" />
                <button class="btn btn-ghost btn-sm btn-full">üîÑ Reload EPG</button>
              </div>
            </div>
            <div>
              <div class="section-title">Channel Filters</div>
              <div class="settings-group" style="padding:13px" id="lang-filter-group">
                <div
                  style="font-size:10px;color:var(--muted);margin-bottom:9px;text-transform:uppercase;letter-spacing:1px">
                  Hide channels by language / region</div>
                <div id="lang-filter-list" style="display:flex;flex-direction:column;gap:6px">
                  <!-- populated by JS -->
                </div>
                <div style="margin-top:10px;display:flex;gap:8px">
                  <button class="btn btn-red btn-sm" id="lang-filter-apply-btn" tabindex="0" style="flex:1">‚úì Apply
                    Filters</button>
                  <button class="btn btn-ghost btn-sm" id="lang-filter-clear-btn" tabindex="0">Clear All</button>
                </div>
                <div id="lang-filter-status" style="margin-top:7px;font-size:11px;color:var(--muted)"></div>
              </div>
              <div class="section-title">Playback</div>
              <div class="settings-group">
                <div class="row-item"><span style="font-size:13px">Auto-Play on Start</span>
                  <div class="toggle-sw on" onclick="this.classList.toggle('on')"></div>
                </div>
                <div class="row-item"><span style="font-size:13px">Hardware Decode</span>
                  <div class="toggle-sw on" onclick="this.classList.toggle('on')"></div>
                </div>
                <div class="row-item"><span style="font-size:13px">Auto Quality</span>
                  <div class="toggle-sw on" onclick="this.classList.toggle('on')"></div>
                </div>
                <div class="row-item"><span style="font-size:13px">Buffer Size</span>
                  <select class="inp" style="width:auto;padding:3px 7px">
                    <option>Small</option>
                    <option selected>Medium</option>
                    <option>Large</option>
                  </select>
                </div>
              </div>
              <div class="section-title">Features</div>
              <div class="settings-group">
                <div class="row-item"><span style="font-size:13px">Ad Detection</span>
                  <div class="toggle-sw on" onclick="this.classList.toggle('on')"></div>
                </div>
                <div class="row-item"><span style="font-size:13px">Auto-Updates</span>
                  <div class="toggle-sw on" onclick="this.classList.toggle('on')"></div>
                </div>
                <div class="row-item"><span style="font-size:13px">Smart Favorites</span>
                  <div class="toggle-sw on" onclick="this.classList.toggle('on')"></div>
                </div>
                <div class="row-item"><span style="font-size:13px">Parental PIN</span>
                  <div class="toggle-sw" onclick="this.classList.toggle('on')"></div>
                </div>
              </div>
              <div class="section-title">App</div>
              <div class="settings-group">
                <div class="row-item"><span style="font-size:13px">Version</span><span
                    style="font-size:12px;color:var(--muted)">1.0.0 (Feb 2026)</span></div>
                <div class="row-item" style="padding:9px 0"><button class="btn btn-ghost btn-sm btn-full">üîÑ Check for
                    Updates</button></div>
                <div class="row-item" style="padding:9px 0"><button class="btn btn-sm btn-full"
                    style="background:rgba(229,0,0,0.12);color:var(--primary2);border:1px solid rgba(229,0,0,0.25)"
                    onclick="clearAllData()">üóë Clear All Data</button></div>
              </div>
            </div>
          </div>
        </div>

      </div><!-- #content -->
    </div><!-- #main -->
  </div><!-- #app -->

  <!-- PLAYER OVERLAY -->
  <div id="player-overlay"
    style="display:none;position:fixed;inset:0;background:#000;z-index:9999;flex-direction:column;">
    <video id="player-video" style="flex:1;width:100%;background:#000;display:block" playsinline></video>
    <div id="player-overlay-top"
      style="position:absolute;top:0;left:0;right:0;padding:14px 18px;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(180deg,rgba(0,0,0,0.85),transparent)">
      <button class="btn btn-ghost btn-sm" onclick="closePlayer()">‚Üê Back</button>
      <div id="player-ch-top" style="font-size:15px;font-weight:700"></div>
      <div style="display:flex;gap:7px">
        <button class="btn btn-ghost btn-sm" onclick="scheduleRecording()">‚è∫ REC</button>
        <button class="btn btn-ghost btn-sm" id="player-fav-btn" onclick="togglePlayerFav()">‚òÜ Fav</button>
        <button class="btn btn-ghost btn-sm" onclick="nav('quality')">üì∂</button>
      </div>
    </div>
    <div id="player-overlay-bottom"
      style="position:absolute;bottom:64px;left:0;right:0;padding:18px 20px 8px;background:linear-gradient(0deg,rgba(0,0,0,0.95),transparent)">
      <div id="player-ch-name" style="font-size:22px;font-weight:800"></div>
      <div id="player-program" style="font-size:13px;color:#aaa;margin-top:3px"></div>
      <div id="player-epg-bar" style="margin-top:10px;display:flex;align-items:center;gap:11px">
        <span style="font-size:11px;color:#888">LIVE</span>
        <div class="progress-bar" style="flex:1;height:3px">
          <div class="progress-fill" id="player-progress" style="width:50%"></div>
        </div>
        <span style="font-size:11px;color:#888" id="player-clock"></span>
      </div>
    </div>
    <div id="player-controls"
      style="background:#111;padding:12px 22px;display:flex;align-items:center;gap:14px;flex-shrink:0;position:absolute;bottom:0;left:0;right:0;">
      <button class="btn btn-ghost btn-sm" id="prev-ch-btn">‚èÆ Prev</button>
      <button class="btn btn-ghost btn-sm" onclick="seekRelative(-30)">‚è™ -30s</button>
      <button id="play-pause-btn" onclick="togglePlay()"
        style="width:44px;height:44px;background:var(--primary);border-radius:22px;border:none;font-size:19px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;">‚è∏</button>
      <button class="btn btn-ghost btn-sm" onclick="seekRelative(30)">+30s ‚è©</button>
      <button class="btn btn-ghost btn-sm" id="next-ch-btn">Next ‚è≠</button>
      <div style="flex:1"></div>
      <button class="btn btn-ghost btn-sm" id="mute-btn" onclick="toggleMute()">üîä</button>
      <input type="range" id="vol-slider" min="0" max="100" value="80" style="width:80px"
        oninput="setVolume(this.value)" />
      <button class="btn btn-ghost btn-sm" id="sleep-timer-btn" onclick="showSleepTimerMenu()"
        title="Sleep Timer">üò¥</button>
      <button class="btn btn-ghost btn-sm" onclick="nav('epg');closePlayer()">üìã Guide</button>
      <button class="btn btn-ghost btn-sm" onclick="closePlayer()">‚úï</button>
    </div>
  </div>

  <script src="/app.js"></script>
</body>

</html>
